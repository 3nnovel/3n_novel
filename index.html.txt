<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3N NOVEL | Official Multiverse Portal</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --neon-red: #ff3e3e; --neon-blue: #00fbff; --neon-gold: #ffcc00;
            --dark-bg: #050505; --card-bg: #0f0f0f; --glass: rgba(255, 255, 255, 0.05);
        }

        /* Base Styles */
        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
        body { background: var(--dark-bg); color: white; font-family: 'Poppins', sans-serif; overflow-x: hidden; }
        
        header {
            padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.95); border-bottom: 2px solid var(--neon-red);
            position: sticky; top: 0; z-index: 2000; backdrop-filter: blur(15px);
        }
        .logo { font-family: 'Orbitron', sans-serif; font-size: 28px; font-weight: 900; cursor: pointer; }
        .logo span { color: var(--neon-red); text-shadow: 0 0 15px var(--neon-red); }

        /* Auth Modal */
        #auth-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 3000; justify-content: center; align-items: center;
        }
        .auth-box {
            background: #111; padding: 40px; border-radius: 20px; border: 1px solid var(--neon-blue);
            width: 90%; max-width: 400px; text-align: center; position: relative;
        }

        /* Form Inputs */
        .admin-input, .admin-textarea { 
            width: 100%; padding: 12px; background: #151515; border: 1px solid #333; 
            color: white; border-radius: 10px; font-family: inherit; margin-bottom: 15px;
        }

        /* Rest of your existing styles... */
        .hero { height: 350px; display: flex; flex-direction: column; justify-content: center; align-items: center; background: linear-gradient(rgba(0,0,0,0.7), var(--dark-bg)), url('https://wallpaperaccess.com/full/1605481.jpg') center/cover; text-align: center; }
        .container { padding: 40px 5%; }
        .membership-badge { background: #111; border: 1px solid var(--neon-gold); padding: 25px; border-radius: 15px; margin-bottom: 30px; display: flex; justify-content: space-between; align-items: center; }
        .novel-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 35px; }
        .novel-card { background: var(--card-bg); border-radius: 20px; overflow: hidden; border: 1px solid #222; transition: 0.4s; position: relative; cursor: pointer; }
        .novel-card img { width: 100%; height: 400px; object-fit: cover; }
        .card-overlay { position: absolute; bottom: 0; width: 100%; padding: 25px; background: linear-gradient(transparent, rgba(0,0,0,0.95)); }
        
        #reader-view { display: none; padding: 40px 10%; background: #080808; min-height: 100vh; }
        .reader-body { font-size: 20px; line-height: 2; color: #ddd; background: #0d0d0d; padding: 50px; border-radius: 25px; white-space: pre-line; }
        .lock-container { text-align: center; padding: 60px; border: 2px dashed var(--neon-gold); border-radius: 20px; }

        .btn { padding: 12px 28px; border-radius: 50px; border: none; font-weight: 700; cursor: pointer; transition: 0.3s; text-transform: uppercase; font-family: 'Orbitron'; font-size: 11px; }
        .btn-red { background: var(--neon-red); color: white; }
        .btn-blue { background: var(--neon-blue); color: black; }
        .btn-gold { background: var(--neon-gold); color: black; }
        
        #admin-panel { display: none; background: #0a0a0a; border: 1px dashed var(--neon-gold); margin-bottom: 30px; padding: 30px; border-radius: 20px; }
    </style>
</head>
<body>

    <div id="auth-modal">
        <div class="auth-box">
            <h2 id="auth-title" style="font-family:'Orbitron'; color:var(--neon-blue); margin-bottom:20px;">JOIN THE CLAN</h2>
            
            <div id="auth-forms">
                <input type="email" id="userEmail" class="admin-input" placeholder="Enter Your Email">
                <input type="password" id="userPass" class="admin-input" placeholder="Password">
                
                <button class="btn btn-blue" style="width:100%" onclick="handleAuth()">CONTINUE</button>
                
                <p style="margin-top:15px; font-size:12px;">
                    <a href="javascript:void(0)" onclick="forgetPass()" style="color:var(--neon-gold); text-decoration:none;">Forget Password?</a>
                </p>
                <button class="btn btn-red" style="margin-top:20px; width:100%;" onclick="closeAuth()">CLOSE</button>
            </div>
        </div>
    </div>

    <header>
        <div class="logo" onclick="location.reload()">3N <span>NOVEL</span></div>
        <div style="display: flex; gap: 10px;">
            <button class="btn btn-gold" onclick="toggleAdmin()"><i class="fas fa-user-shield"></i> Admin</button>
            <button class="btn btn-red" id="authBtn" onclick="openAuth()">Join Clan</button>
        </div>
    </header>

    <div id="home-view">
        <section class="hero">
            <h1>MULTIVERSE PORTAL</h1>
            <div style="width: 60%; max-width: 600px;">
                <input type="text" id="novelSearch" class="admin-input" style="border-radius:50px; padding:15px 25px;" placeholder="Search for novels..." onkeyup="filterNovels()">
            </div>
        </section>

        <div class="container">
            <div class="membership-badge" id="memberInfo">
                <div>
                    <i class="fas fa-crown" style="color:var(--neon-gold)"></i> 
                    STATUS: <span id="userStatus" style="color:var(--neon-red)">FREE HUNTER</span>
                </div>
                <button class="btn btn-gold" onclick="buyMembership()">UPGRADE TO PREMIUM</button>
            </div>

            <div id="admin-panel">
                <h2 style="font-family: 'Orbitron'; color: var(--neon-gold); margin-bottom: 20px;">System Config</h2>
                <input type="text" id="admName" class="admin-input" placeholder="Novel Name">
                <input type="number" id="admLimit" class="admin-input" placeholder="Free Chapters Limit">
                <textarea id="admText" class="admin-textarea" rows="4" placeholder="Chapter Content..."></textarea>
                <button class="btn btn-blue" onclick="publishNovel()">Publish</button>
            </div>

            <h2 style="font-family: 'Orbitron'; margin-bottom: 30px; border-left: 5px solid var(--neon-red); padding-left: 15px;">NOVEL ARCHIVE</h2>
            <div class="novel-grid" id="mainGrid"></div>
        </div>
    </div>

    <div id="reader-view">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
            <button class="btn btn-red" onclick="location.reload()">Back</button>
            <h2 id="rTitle" style="font-family:'Orbitron'; color:var(--neon-blue);"></h2>
            <select id="chapSelect" onchange="jumpToChap()" style="background:#000; color:#fff; padding:10px; border-radius:10px;"></select>
        </div>
        <div id="rContent" class="reader-body"></div>
        <div style="display:flex; justify-content: space-between; margin-top: 30px;">
            <button class="btn btn-blue" onclick="moveChap(-1)">Prev</button>
            <button class="btn btn-blue" onclick="moveChap(1)">Next</button>
        </div>
    </div>

    <script>
        // --- ðŸ”‘ AUTH & DATABASE LOGIC ---
        let currentUser = localStorage.getItem('logged_user') || null;
        let isPremium = localStorage.getItem('3n_premium') === 'true';

        const defaultDB = {
            "Solo Leveling": { img: "https://m.media-amazon.com/images/I/81L9D8+K6JL._AC_UF1000,1000_QL80_.jpg", freeLimit: 2, chapters: ["Chap 1 content", "Chap 2 content", "Locked content"] }
        };
        let db = JSON.parse(localStorage.getItem('3N_MASTER_DB')) || defaultDB;
        let activeNovel = ""; let activeIndex = 0;

        function renderHome() {
            if(currentUser) {
                document.getElementById('authBtn').innerText = "LOGOUT";
                document.getElementById('authBtn').onclick = logout;
            }
            if(isPremium) {
                document.getElementById('userStatus').innerText = "PREMIUM HUNTER";
                document.getElementById('userStatus').style.color = "var(--neon-gold)";
            }
            
            const grid = document.getElementById('mainGrid');
            grid.innerHTML = Object.keys(db).map(name => `
                <div class="novel-card" onclick="openReader('${name}')">
                    <img src="${db[name].img || 'https://via.placeholder.com/300x400'}" onerror="this.src='https://via.placeholder.com/300x400'">
                    <div class="card-overlay">
                        <h3>${name}</h3>
                        <p style="color:var(--neon-blue)">Limit: ${db[name].freeLimit} Chapters</p>
                    </div>
                </div>
            `).join('');
        }

        // --- AUTH FUNCTIONS ---
        function openAuth() { document.getElementById('auth-modal').style.display = 'flex'; }
        function closeAuth() { document.getElementById('auth-modal').style.display = 'none'; }

        function handleAuth() {
            const email = document.getElementById('userEmail').value;
            const pass = document.getElementById('userPass').value;
            if(!email || !pass) return alert("Email and Password required!");

            // Save user to local storage (Simulating Registration)
            localStorage.setItem('user_' + email, pass);
            localStorage.setItem('logged_user', email);
            alert("Welcome to the Clan, Hunter!");
            location.reload();
        }

        function forgetPass() {
            const email = prompt("Enter your registered email to reset password:");
            const savedPass = localStorage.getItem('user_' + email);
            if(savedPass) {
                alert("Your Password is: " + savedPass + "\n\n(In a real site, we would send a link to your email)");
            } else {
                alert("Email not found in our multiverse records!");
            }
        }

        function logout() {
            localStorage.removeItem('logged_user');
            location.reload();
        }

        // --- READER LOGIC ---
        function openReader(name) {
            if(!currentUser) {
                alert("Please Login first to read!");
                return openAuth();
            }
            activeNovel = name;
            activeIndex = parseInt(localStorage.getItem('save_'+name)) || 0;
            document.getElementById('home-view').style.display = 'none';
            document.getElementById('reader-view').style.display = 'block';
            document.getElementById('rTitle').innerText = name;
            
            const sel = document.getElementById('chapSelect');
            sel.innerHTML = db[name].chapters.map((_, i) => `<option value="${i}">Chapter ${i+1}</option>`).join('');
            updateContent();
        }

        function updateContent() {
            const limit = db[activeNovel].freeLimit || 2;
            const contentBox = document.getElementById('rContent');

            if(activeIndex >= limit && !isPremium) {
                contentBox.innerHTML = `
                    <div class="lock-container">
                        <i class="fas fa-lock" style="font-size:40px; color:var(--neon-gold);"></i>
                        <h2>RESTRICTED AREA</h2>
                        <p>Only Premium Members can access Chapter ${activeIndex+1}.</p>
                        <button class="btn btn-gold" style="margin-top:20px;" onclick="buyMembership()">Upgrade to Unlock</button>
                    </div>
                `;
            } else {
                contentBox.innerText = db[activeNovel].chapters[activeIndex];
            }
            document.getElementById('chapSelect').value = activeIndex;
            localStorage.setItem('save_'+activeNovel, activeIndex);
            window.scrollTo(0,0);
        }

        function moveChap(dir) { if(db[activeNovel].chapters[activeIndex + dir]) { activeIndex += dir; updateContent(); } }
        function jumpToChap() { activeIndex = parseInt(document.getElementById('chapSelect').value); updateContent(); }

        // --- ADMIN & MISC ---
        function toggleAdmin() {
            const p = document.getElementById('admin-panel');
            p.style.display = (p.style.display === 'block') ? 'none' : 'block';
        }

        function publishNovel() {
            const n = document.getElementById('admName').value;
            const l = document.getElementById('admLimit').value;
            const t = document.getElementById('admText').value;
            if(!n || !t) return alert("Fill details!");
            if(!db[n]) db[n] = { chapters: [], freeLimit: l };
            db[n].chapters.push(t);
            localStorage.setItem('3N_MASTER_DB', JSON.stringify(db));
            location.reload();
        }

        function buyMembership() {
            if(!currentUser) return openAuth();
            if(confirm("Unlock Premium for â‚¹499?")) {
                localStorage.setItem('3n_premium', 'true');
                location.reload();
            }
        }

        window.onload = renderHome;
    </script>
</body>
</html>
